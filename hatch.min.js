$(document).ready(function(){var e=$("#field-4"),t=$("#field-camp"),a=$("#austin-texas"),n=$("#dallas"),l=$("#list-type .type-image-url"),s=$("#courses-list .card"),o=$("#city-list span"),i=$("#season-list span"),c=$("#location-list span"),r=jQuery.parseJSON("[]"),p=s.length,d=document.createElement("span");d.textContent=p+" Courses found",$(".filter-subtitle.count").append(d),l.each(function(e,t){var a=jQuery.parseJSON($(t).text());r.push(a)}),o.each(function(t,a){var n=jQuery.parseJSON($(a).text());e.append('<option value="'+n.value+'" >'+n.name+"</option>")}),i.each(function(e,a){var n=jQuery.parseJSON($(a).text());t.append('<option value="'+n.value+'" >'+n.name+"</option>")}),c.each(function(e,t){var l=jQuery.parseJSON($(t).text());"dallas"==l.city&&"false"==l.hidden?n.append('<option value="'+l.value+'" >'+l.name+"</option>"):"austin-texas"==l.city&&"false"==l.hidden&&a.append('<option value="'+l.value+'" >'+l.name+"</option>")}),$(".w-dyn-item .filters-type").each(function(e,t){var a=$(t);a.parent().parent().addClass(a.text().toLowerCase().replace(",","").replace(" /","").replace(/\//g,"-").replace(" &","").replace(/ /g,"-"))}),$(".w-dyn-item .tabs-camps.level:not(.w-condition-invisible)").each(function(e,t){var a=$(t);a.parent().parent().parent().parent().parent().addClass(a.text().toLowerCase().replace(/\//g,"-").replace(/ /g,"-"))}),$(".w-dyn-item .tabs-camps .level:not(.w-condition-invisible)").each(function(e,t){var a=$(t);a.parent().parent().parent().parent().parent().parent().parent().addClass(a.text().toLowerCase().replace(/\//g,"-").replace(/ /g,"-"))}),$(".filters-card-elements span").each(function(e,t){var a=jQuery.parseJSON($(t).text());$(t).parent().parent().parent().addClass(a.city),$(t).parent().parent().parent().addClass(a.location),$(t).parent().parent().parent().addClass(a.camp)}),$(".location-select.austin-texas").prop("disabled","disabled");var u=new URLSearchParams(window.location.search),v=u.get("course"),f=u.get("location"),h=u.get("city");let g;var m,y,k,b,x,Y,C={},w=5,D=15;const j=$(".grid").isotope({itemSelector:".w-dyn-item",filter:function(){var e=$(this),t=!g||e.text().match(g),a=!m||e.is(m);return t&&a}}),O=j.find(".w-dyn-item");j.addClass("is-showing-items").isotope("revealItemElements",O),$(function(){var e,t,a={range:!0,min:5,max:15,values:[5,15],slide:function(e,t){w=t.values[0],D=t.values[1],$(".age-range").text("From "+w+" to "+D),$checkbox=$("#slider-range"),J($checkbox),m=M(C),j.isotope(),N()}};$("#slider-range").slider(a),e=$("#slider-range").slider("values",0),t=$("#slider-range").slider("values",1),$(".range-info--text.age-range").text("From "+e+" to "+t)}),$(function(){$('input[name="daterange"]').daterangepicker({standalone:!0,anchorElement:$(".option-set.daterange_container"),autoUpdateInput:!1,locale:{cancelLabel:"Clear"},opens:"right"}),$(".daterangepicker").appendTo(".daterange_container"),$('input[name="daterange"]').on("apply.daterangepicker",function(e,t){$(this).val(t.startDate.format("M-D-YYYY")+" - "+t.endDate.format("M-D-YYYY")),x=t.startDate.format("M-D-YYYY"),Y=t.endDate.format("M-D-YYYY"),$checkbox=$("#daterange"),J($checkbox),m=M(C),j.isotope(),N()}),$('input[name="daterange"]').on("cancel.daterangepicker",function(e,t){$(this).val(""),x=void 0,Y=void 0,$checkbox=$("#daterange"),J($checkbox),m=M(C),j.isotope(),N()})}),null!=v?($("#"+v)[0].checked=!0,C.type=["."+v],m=M(C),j.isotope(),N()):null!=f&&("dallas"==h?(y=".dallas",$(".location-select.dallas").css("display","block"),$(".location-select"+y).val("."+f),$(".city-select").val(".dallas")):"austin-texas"==h&&(y=".austin-texas",$(".location-select.austin-texas").css("display","block"),$(".location-select"+y).val("."+f),$(".city-select").val(".austin-texas")),$(".location-select"+y).prop("disabled",!1),b="."+f,C.city=[y],C.location=[b],m=M(C),j.isotope(),N()),$("#filters-courses").on("change",function(e){J($(e.target)),null!=$(".city-select")[0]&&("*"!=(y=$(".city-select")[0].value)?($(".location-select"+y).css("display","block"),$(".location-select:not("+y+")").val("*"),$(".location-select:not("+y+")").css("display","none"),$(".location-select"+y).prop("disabled",!1)):($(".location-select.dallas").css("display","none"),$(".location-select.austin-texas").css("display","block"),$(".location-select.austin-texas").prop("disabled","disabled"),$(".location-select").val("*"))),k=$(".camp-select")[0].value,null!=$(".location-select")[0]&&(b=$(".location-select"+y)[0].value),$("#start-date")[0].value,null!=$(".location-select")[0]&&(x=$("#start-date")[0].value),$("#end-date")[0].value,null!=$(".location-select")[0]&&(Y=$("#end-date")[0].value),m=M(C),j.isotope(),N(),null==m&&null==m||$(".button.clear").css("display","block")}),$(".button.clear").on("click",function(){C={},$(".button.clear").css("display","none"),g=void 0,$(".quicksearch")[0].value="";var e=$(".button.checkbox");$(".input-select select").val("*");for(var t=0;t<e.length;t++)e[t].checked=!1;$("#graphic-web-design")[0].checked=!1,m=M(C),j.isotope(),N()});const S=$("#quicksearch").keyup(function(e,t){let a;return function(){a&&clearTimeout(a),setTimeout(function(){e(),a=null},t||100)}}(function(){g=new RegExp(S.val(),"gi"),j.isotope(),N()}));function M(e){var t=0,a=[],n=[],l=[];for(var s in e){if("city"==s)e[s]=[y];else if("location"==s)e[s]=[b];else if("camp"==s)e[s]=[k];else if("range"==s){l=[];for(var o=w;o<=D;o++)l.push("."+o);19==l.length&&(l=[]),e[s]=l}else if("date"==s)if(null==Y&&null==x)e[s]=[];else if(null!=x)if(""==Y){var i=new Date;Y=i.setMonth(i.getMonth()+1),e[s]=Q(x,Y)}else e[s]=Q(x,Y);n.push(e[s].join(" "));var c=e[s];if(c.length){if(0===t)a=c.slice(0);else{for(var r=[],p=a.slice(0),d=0,u=c.length;d<u;d++)for(var $=0,v=p.length;$<v;$++)r.push(p[$]+c[d]);a=r}t++}}return a.join(", ")}function J(e){var t=e[0],a=e.parents(".option-set").attr("data-group"),n=C[a];n||(n=C[a]=[]);var l=e.hasClass("all");l&&(delete C[a],t.checked||(t.checked="checked"));var s=$.inArray(t.value,n);if(t.checked){var o=l?"input":"input.all";e.siblings(o).removeAttr("checked"),l||-1!==s||C[a].push(t.value)}else l||(C[a].splice(s,1),e.siblings("[checked]").length||e.siblings("input.all").attr("checked","checked"))}function N(){var e,t=0;$("#courses-list .card-item").each(function(a,n){((e=$(n)[0].attributes[1].nodeValue).indexOf("opacity: 0")>-1||e.indexOf("display: none")>-1)&&(t+=1)}),p=s.length-t;let a=$($('input[name="full-day"]:checked'));0==p&&a.length>0?$(".camps_info--block").removeClass("hide"):$(".camps_info--block").addClass("hide"),d.textContent=p+" Courses found"}function Q(e,t){var a=[],n=moment(e);for(t=moment(t);n<=t;)a.push("."+moment(n).format("M-D-YYYY")),n=moment(n).add(1,"days");return a}$("#quicksearch").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1})});
